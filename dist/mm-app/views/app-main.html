
<!-- SIDEBAR COVER -->
<div ui-view="app-sidebar"></div>

<!-- CONTENT COVER -->
<div ui-view="app-content" class="page {{masterController.pageClass}}"></div>

<!-- FILTER COVER -->
<div ui-view="app-filter"></div>


<div id="mm-addfiles-cover" mm-dropzone ng-multiple="masterController.fileupload.multiple" ng-on-change="masterController.fileupload.addFiles" class="row center-xs middle-xs" ng-class="{'is-open': masterController.addItems.enabled}">
	<div class="col-xs-10">
		<div class="dropzone-inner">
			<div class="icon"><div class="fa fa-cloud-upload"></div></div>
			<div class="has-drop">
				<p class="bold">Drag & Drop</p>
				<p>your media files, or <label for="mm-media-upload-input" class="btn-browse">browse</label></p>
			</div>
			<div class="no-drop">
				<p><label for="mm-media-upload-input" class="btn-browse">Browse</label> for your files</p>
			</div>
			<div>
				<p>Maybe get creative with our <a ng-href="{{masterController.getPixieLink('open')}}" class="btn-browse">Image Creator</a></p>
			</div>
			<div class="input-group input-group-lg">
				<input type="text" class="form-control" ng-model="masterController.addItems.virtualFile.name" placeholder="or perhaps click here to create a Virtual File">
				<span class="input-group-btn">
					<button class="btn btn-default" ng-click="masterController.addItems.virtualFile.create()" type="button">Create</button>
				</span>
			</div>
			<!-- <input type="text" class="form-control input-lg" placeholder="or perhaps a Virtual File"> -->
		</div>
	</div>
</div>



<div id="mm-fileupload-cover" class="" ng-class="{'is-open': masterController.fileupload.enabled }">
	<div class="fu-progress">

		<div class="header-bar text-left">
			<div class="container-fluid">
				<div class="hb-text" ng-hide="masterController.fileupload.filesUploading">Upload Files</div>
				<div class="hb-text" ng-show="masterController.fileupload.filesUploading">Uploading <span class="loading dots2"></span> <small class="text-muted">Please keep this page open until it's done.</small></div>
				<div class="hb-text" ng-show="masterController.fileupload.doneUploading">Uploaded</div>
			</div>
			
			<div class="container-fluid">
				<div class="btn-bar">
					<div class="pull-left" ng-show="masterController.fileupload.doneUploading">	
						<small class="text-success" ng-show="masterController.fileupload.filesSuccessCount > 0"><ng-pluralize count="masterController.fileupload.filesSuccessCount" when="{'1': '1 file', 'other': '{} files'}"> </ng-pluralize> uploaded Successfuly</small>
						<small class="text-danger" ng-show="masterController.fileupload.filesErrorCount > 0"><ng-pluralize count="masterController.fileupload.filesErrorCount" when="{'1': '1 file', 'other': '{} files'}"> </ng-pluralize> has errors</small>
					</div>
					<a href="" ng-click="masterController.doUpload()" class="btn btn-success" ng-class="{'disabled': !masterController.fileupload.files.length || masterController.fileupload.doneUploading}">
						<span ng-hide="masterController.fileupload.filesUploading">Start Upload</span>
						<span ng-show="masterController.fileupload.filesUploading" class="loading bullet"></span>
					</a>
					<label for="mm-media-upload-input" ng-class="{'disabled': masterController.fileupload.filesUploading || masterController.fileupload.doneUploading}" class="btn btn-default">Add More</label>
				</div>
			</div>
		</div>

		<div class="content-sec custom-scrollbar">
			
			<div class="start-xs">

				<div class="media" ng-repeat="item in masterController.fileupload.files">
					<div class="media-left">
						<div mm-thumb class="mm-thumb" ng-model="item"></div>
					</div>
					<div class="media-body text-left">
						<a href="" ng-click="masterController.fileupload.removeItem(item)" class="close">&times;</a>
						<h4 class="media-heading pull-left">{{item.name | cut:true:30:' ...'}}</h4>
						<div class="progress">
							<div class="progress-bar" ng-class="{'progress-bar-success': item.success, 'progress-bar-danger': item.error, 'progress-bar-info': !item.success, 'progress-bar-striped active': masterController.transcoding }" ng-style="{'width': item.progress + '%'}"></div>
							<div class="progress-bar progress-bar-primary progress-type" ng-class="{'progress-bar-success': item.success, 'progress-bar-danger': item.error}" ng-style="{'width': item.processing + '%'}"></div>
						</div>
						<div class="text-muted">
							<small class="text-uppercase pull-right">{{item.sizeMB}} - {{item.type}}</small>
							<small>Uploaded {{item.progress}}%</small>
							<small ng-show="masterController.transcoding"> | Processed {{item.processing}}%</small>
						</div>
						<div ng-if="item.errorMsg != false" class="text-muted text-danger">{{item.errorMsg}}</div>

					</div>
				</div>

			</div>
			
		</div>
		<div class="footer-bar text-center"> 
			<a href="" ng-click="masterController.fileupload.close()" ng-class="{'disabled': masterController.fileupload.filesUploading}" ng-show="masterController.fileupload.files.length == masterController.fileupload.filesCompleted" class="btn btn-link">Close</a> 
			<a href="" ng-click="masterController.fileupload.close()" ng-class="{'disabled': masterController.fileupload.filesUploading}" ng-hide="masterController.fileupload.files.length == masterController.fileupload.filesCompleted" class="btn btn-link">Cancel</a> 
		</div>
	</div>
</div>	 



<div id="mm-filedrop-cover" class="row center-xs middle-xs">
	<div class="col-xs-4">
		<div class="icon"><div class="fa fa-cloud-upload"></div></div>
		<p>Drop Your Files to Upload</p>
	</div>
</div>





<div id="mm-folder-manager" class="row center-xs middle-xs" ng-class="{'is-open': masterController.folders.manager.enabled}">
	<div class="col-xs-8 mm-fm-inner-wrap">
		<div class="title">
			<span>Manage Folders</span>

			<div class="input-group pull-right">
				<input type="text" class="form-control" ng-model="masterController.folders.manager.add.string" placeholder="New Folder">
				<span class="input-group-btn">
					<button class="btn btn-default" type="button" ng-click="masterController.folders.manager.add.submit(masterController.folders.manager.add.string, true)"><i class="fa fa-plus"></i></button>
				</span>
			</div><!-- /input-group -->

		</div>

		<div class="content custom-scrollbar">

			<!-- <ul class="mm-folderList" ui-sortable="masterController.folders.sortableOptions" ng-model="masterController.folders.list">
				<li ng-repeat="folder in masterController.folders.list" ng-include="'mm-foldermanager-navtree.html'"></li>
			</ul> -->

			<tg-dynamic-directive ng-model="masterController.folders.list" tg-dynamic-directive-view="masterController.folders.getTemplate"></tg-dynamic-directive>

		</div>
		<div class="footbar">
			<a href="" ng-click="masterController.folders.manager.enabled = false" class="btn btn-link btn-all-caps">Close</a>
		</div>
	</div>

</div>

<!-- Tree Item Template -->
<script type="text/ng-template"  id="mm-foldermanager-navtree.html">


	<ul class="mm-folderList" ui-sortable="masterController.folders.sortableOptions" ng-model="ngModelItem.items" ng-class="{'mm-no-children': ngModelItem.items.length < 1}">
		
		<li ng-repeat="folder in ngModelItem.items" data-num-items="{{ngModelItem.items.length}}">

			<div class="input-group">
				<span class="input-group-addon"><i class="fa fa-folder-o"></i></span>
				<input type="text" ng-model="folder.name" class="form-control" aria-label="..." ng-focus="masterController.folders.manager.add.focus = folder.id" >
				<div class="input-group-btn">
					<a href="" class="btn btn-link" ng-click="masterController.folders.manager.edit(folder.id, folder.name)"><i class="fa fa-floppy-o"></i></a>
					<a href="" class="btn btn-link" ng-click="masterController.folders.manager.delete(folder.id)"><i class="fa fa-trash-o"></i></a>
				</div>
			</div>

			<tg-dynamic-directive ng-model="folder" tg-dynamic-directive-view="masterController.folders.getTemplate"></tg-dynamic-directive>

		</li>

	</ul>


</script>



<!-- HAS TO BE THE LAST LAYER AS GOES ON TOP ALL -->
<div id="mm-delete-confirmation" class="row center-xs middle-xs" ng-class="{'is-open': masterController.deleteConfirmation.enabled}">
	<div class="col-xs-5 dc-innerwrap">
		
		<div class="dc-heading">{{masterController.deleteConfirmation.title}}</div>
		<div class="dc-content">
			<h3>
				<strong>{{masterController.deleteConfirmation.message}}</strong>
			</h3>
			<div class="checkedbox checked" ng-show="masterController.deleteConfirmation.type == 'media'"> You have selected {{masterController.deleteConfirmation.items_length}} item<span ng-show="masterController.deleteConfirmation.items_length > 1">s</span>.</div>
			<div class="checkedbox checked" ng-show="masterController.deleteConfirmation.type == 'media'"> All selected media item<span ng-show="masterController.deleteConfirmation.items_length > 1">s</span> will be <strong>permenantly deleted</strong>.</div>
			<div class="checkedbox checked" ng-show="masterController.deleteConfirmation.type == 'media'"> All content linked to the item<span ng-show="masterController.deleteConfirmation.items_length > 1">s</span> will be <strong>broken</strong>.</div>

			<div class="checkedbox checked" ng-show="masterController.deleteConfirmation.type == 'folder'"> All Sub-Folders linked to the Folder will be <strong>deleted</strong>.</div>
			<div class="checkedbox checked" ng-show="masterController.deleteConfirmation.type == 'folder'"> All Media Files linked to the Folder will be <strong>deleted</strong>.</div>
			<div class="checkedbox checked" ng-show="masterController.deleteConfirmation.type == 'folder'"> All content linked to the Media in the Folders will be <strong>broken</strong>.</div>

			<div class="btn-bar">
				<a href="" ng-click="masterController.deleteConfirmation.deferred.resolve()" class="btn btn-danger">Yes, Delete {{masterController.deleteConfirmation.type}}</a>
				<a href="" ng-click="masterController.deleteConfirmation.deferred.reject()" class="btn btn-link">Close</a>
			</div>
		</div> 

	</div>
</div>